<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Processed Data</title>


 <script type='text/javascript' src="https://www.google.com/jsapi?autoload={'modules':[{'name':'visualization', 'version':'1','packages':['timeline']}]}"></script>
    <script type='text/javascript'>
      google.load('visualization', '1', {packages:['table']});
      google.setOnLoadCallback(drawTable);
      function drawTable() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Company Name');
        data.addColumn('string', 'Max');
        data.addColumn('string', 'Low');
        data.addRows([
		
			
		  	{%autoescape off%}
		{%for cName,priceData in data.items %}
          		['{{cName}}',  "{{priceData.max}}", "{{priceData.least}}"],      
			{%endfor%}
		 {%endautoescape%}
		 
        ]);

        var table = new google.visualization.Table(document.getElementById('table_div'));
		
		
        table.draw(data, {showRowNumber: true});
		
	 google.load("visualization", "1", {packages: ["timeline"]});


	months = ['January','February','March','April','May','June','July','August','September','October','November','December']
		
	  var container = document.getElementById('udi');
	  var chart = new google.visualization.Timeline(container);

		
		
		 var dataTable = new google.visualization.DataTable();
		  dataTable.addColumn({ type: 'string', id: 'CompanyName' });
		  dataTable.addColumn({ type: 'string', id: 'Name' });
		  dataTable.addColumn({ type: 'date', id: 'Start' });
		  dataTable.addColumn({ type: 'date', id: 'End' });
		  dataTable.addRows([
		  {%autoescape off%}	{%for cName,priceData in data.items %}
				{%for val in priceData.max%}
					['{{cName}}',  '{{val.0}}', new Date( {{val.1}},months.indexOf('{{val.2}}')+1, 1), new Date( {{val.1}},months.indexOf('{{val.2}}')+1, 30)],
				{%endfor%}
				
				{%for val in priceData.least%}
					['{{cName}}',  '{{val.0}}', new Date( {{val.1}},months.indexOf('{{val.2}}')+1, 1), new Date( {{val.1}},months.indexOf('{{val.2}}')+1, 30)],
				{%endfor%}
			 {%endfor%}
             {%endautoescape%}
		  ]);
		  chart.draw(dataTable);
      }
    </script>
</head>

<body>
<article> 
{%if sampleData %}
  This is a report generated by sample test data. <br/>
  <a href="/sampleData.csv">Sample File Format.</a> {%endif%} </article>
<div id="udi"></div>

<div id="table_div"></div>
<fieldset>
  <legend>Upload your data as per sample csv data here.</legend>
  <form  method="post" enctype="multipart/form-data">
    <input type="file" name="csvFile" />
    <input type="submit">
  </form>
</fieldset>
</body>
</html>
